@if (mensajeExito) {
<div class="alert alert-success alert-fixed">
  {{ mensajeExito }}
</div>
}
<div class="row row-cols-1 row-cols-sm-2 row-cols-lg-3 g-4 d-flex justify-content-center">

   @if(spinner){
      <app-spinner></app-spinner>
   }@else{

      @if (gestionar()) {
        <div class="col">
          <button class="card create-card h-100 w-100 d-flex flex-column justify-content-center align-items-center">
            <i class="bi bi-plus-lg create-icon"></i>
            <span class="mt-2">Crear juego</span>
          </button>
        </div>
   }
@for (juego of juegos; track juego.id) {
    <div class="col">
      <div class="card game-card h-100 border-0 shadow-sm">
        <div class="game-img-wrapper">
           <img
            [src]="juego.imagen_url"
            class="card-img-top"
            [alt]="juego.titulo"
            (click)="verDetalle(juego.id)"
            style="cursor: pointer;"
          />
        </div>
        <div class="card-body d-flex flex-column text-light">
          <h5 class="fw-bold mb-1">{{ juego.titulo }}</h5>
          <p class="text-secondary small mb-2">{{ juego.plataforma.nombre }} • {{ juego.juego_genero | generosPipe }}</p>
          <p class="fw-semibold text-primary mb-3 fs-5">{{ juego.precio | currency }}</p>
          <div class="mt-auto d-flex gap-2">
            @if (gestionar()) {
              <button class="btn btn-outline-primary btn-sm flex-fill" (click)="actualizarJuego(juego.id)">
                <i class="bi bi-pencil-square me-1"></i> Actualizar
              </button>

            }@else {
              <button class="btn btn-outline-primary btn-sm flex-fill" (click)="agregarAlCarrito(juego.id)">
                <i class="bi bi-cart-plus me-1"></i> Añadir
              </button>
            }

          <button
            class="btn btn-primary btn-sm flex-fill"
            (click)="verDetalle(juego.id)">
            <i class="bi bi-eye me-1"></i> Ver detalle
          </button>

          </div>
        </div>
      </div>
    </div>
  } @empty {
    <p class="text-center text-light mt-4">No hay juegos disponibles.</p>
  }
   }
</div>

